plugins {
  id "org.echocat.golang" version "0.1.16"
}

import org.gradle.internal.os.OperatingSystem;

group 'github.com/AlexanderIvakin/fpsutil'

golang {
    // Set default platforms to build but make it overwritable via -Dplatforms=<..>
    platforms = System.getProperty("platforms", "linux-amd64,windows-amd64,darwin-amd64,freebsd-amd64,freebsd-386")

    dependencies {
        build 'github.com/shirou/gopsutil'
        build 'github.com/urfave/cli'
        build 'github.com/spf13/cobra'
        test 'github.com/stretchr/testify'
    }
}

if (OperatingSystem.current().isWindows()) {
    golang.build {
        gopath = "$System.env.GOPATH"
        useTemporaryGopath = false
    }
    golang.toolchain {
        goversion = "go1.8"
        goroot = "$System.env.GOROOT"
    }
}